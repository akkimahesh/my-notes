## ğŸ§¾ Jenkins & DevOps Running Notes â€” Clean & Structured

---

# ğŸ”¹ Input Block (Pipeline Safety)

**Purpose:**
Before proceeding with deployment/configuration, ask for manual approval.

```groovy
input {
    message "All configurations look good. Proceed?"
    ok "Yes, Continue"
}
```

âœ… Used as a manual gate
âœ… Prevents accidental deployments

---

# ğŸ”¹ Jenkins Best Practices

## ğŸ‘¤ Run Jenkins as Normal User (NOT root)

* Always connect Jenkins agent using a **non-root user**
* Improves security
* Follows production best practices

---

## âš™ï¸ Important Pipeline Options

### 1ï¸âƒ£ `options {}`

Used for pipeline-level settings.

Example:

```groovy
options {
    timeout(time: 30, unit: 'MINUTES')
}
```

---

### 2ï¸âƒ£ `post {}`

Runs actions after pipeline completion.

Example:

```groovy
post {
    always {
        deleteDir()
    }
}
```

### ğŸ§¹ `deleteDir()`

* Deletes workspace directory
* Keeps Jenkins clean
* Prevents stale files

---

### 3ï¸âƒ£ `when {}` condition

Controls stage execution.

Example:

```groovy
when {
    branch 'main'
}
```

---

# ğŸ”¹ Required Jenkins Plugin

## ğŸ“¦ Pipeline Utility Steps Plugin

**Purpose:** Read JSON files inside Jenkins.

Example:

```groovy
def data = readJSON file: 'config.json'
```

âœ… Parse JSON
âœ… Useful for dynamic pipelines

---

# ğŸ”¹ SCM Integration

When pipeline is configured **from SCM**:

âœ… Code automatically clones
âŒ No need for manual `git clone`

---

# ğŸ”¹ Node.js Important Concept

## ğŸ“ `node_modules`

* Created after running:

```bash
npm install
```

**Contains:**

* All required dependencies
* Required to run `server.js`

âš ï¸ Without `node_modules`, Node app will fail.

---

# ğŸ”¹ Schema Concept

**Meaning:**

Schema defines structure of data in DB.

ğŸ“¦ Example:

* Amazon seller uploads products via console
* Similarly, we load products into DB using files

---

# ğŸ”¹ Nexus Requirements

âš ï¸ **Java is mandatory** for Nexus.

---

# ğŸ”¹ Running Terraform from Jenkins Agent

## âœ… Prerequisites

1. Terraform installed on agent server
2. AWS credentials configured on agent

Without these â†’ Terraform will fail.

---

# ğŸ”¹ Zip Command Explained

```bash
zip -q -r catalogue.zip ./* -x ".git" -x "*.zip"
```

## ğŸ” Flags Meaning

* `-q` â†’ Quiet mode (silent output)
* `-r` â†’ Recursive
* `catalogue.zip` â†’ Output zip name
* `./*` â†’ Include all files in current directory
* `-x` â†’ Exclude files

### âš ï¸ Why exclude `*.zip`?

If run again:

* Previous zip may get included
* Causes nested zip problem

---

# ğŸ”¹ Nexus Versioning Strategy

| Environment | Version Format   |
| ----------- | ---------------- |
| DEV         | `1.0.0-SNAPSHOT` |
| PROD        | `1.0.0-release`  |

---

# ğŸ”¹ Jenkins â†’ Nexus Integration

## Required Plugin

* **Nexus Artifact Uploader**

## Steps

1. Install plugin
2. Store Nexus credentials
3. Use pipeline upload step

---

## ğŸ” Store Nexus Credentials in Jenkins

Path:

> Jenkins â†’ Manage Jenkins â†’ Credentials

Example:

* Username: `admin`
* Password: `admin@123`
* ID: your choice
* Description: optional

---

# ğŸ”¹ Provision Meaning

**Provision =**

> Installing required software, packages, and applications automatically.

---

# ğŸ”¹ Catalogue Deployment Structure

Recommended repo layout:

```
catalogue-deploy/
 â”œâ”€â”€ Jenkinsfile
 â””â”€â”€ terraform/
      â””â”€â”€ *.tf
```

---

# ğŸ”¹ Parent â†’ Child Job Trigger (Important)

Jenkins is event-driven.

After parent job completes â†’ child job is triggered.

Example:

```groovy
stage('Deploy') {
    steps {
        script {
            def params = [
                string(name: 'version', value: "${VERSION}"),
                string(name: 'environment', value: "dev")
            ]

            build job: "child-job-name",
                  parameters: params,
                  wait: true
        }
    }
}
```

âœ… Pass parameters
âœ… Wait for child completion

---

# ğŸ”¹ SonarQube Setup

âš ï¸ Java is mandatory

## Flow

```
sonarscanner â†’ SonarQube â†’ Reports
```

---

## ğŸ”§ Configure Sonar Scanner on Agent

Edit:

```bash
sonar-scanner.properties
```

Add:

```properties
sonar.host.url=http://<sonarqube-ip>
sonar.login=<token>
```

---

# ğŸ”¹ Multibranch Pipeline

**Purpose:**

* Developers own repo
* DevOps should not disturb branches
* Jenkins auto-discovers branches

âœ… CI/CD automation
âœ… Clean branch isolation

---

# ğŸ”¹ Jenkins Shared Libraries

Used to:

* Reuse pipeline code
* Avoid duplication
* Standardize pipelines

---

# ğŸ”¹ Parallel Stages in Jenkins

Run jobs simultaneously to save time.

Example:

```groovy
parallel {
    stage('Test') {
        steps {
            echo 'Running tests'
        }
    }
    stage('Lint') {
        steps {
            echo 'Running lint'
        }
    }
}
```

âœ… Faster pipelines
âœ… Better resource usage

---

# ğŸ”¹ `.groovy` Files in Jenkins

**Meaning:**

* Written in Groovy (superset of Java)
* Used like variables in:

  * Terraform (`variables.tf`)
  * Ansible (`vars.yaml`)

**Purpose:**

* Store reusable logic
* Centralized configuration

---

## âœ… Your Notes â€” Now Production Ready

---

